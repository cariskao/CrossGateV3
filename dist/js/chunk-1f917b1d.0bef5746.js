(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f917b1d"],{4252:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",{staticClass:"table table-hover"},[t._t("tableHead",[t._m(0)]),t._t("tableBody",[s("tbody",t._l(t.tableData.carts,function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm border-0",attrs:{type:"button",disabled:""!=t.loadingItem},on:{click:function(s){t.doit(a.id,a.product.title)}}},[t.loadingItem===a.id?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[s("p",{staticClass:"mb-0"},[s("span",{staticClass:"badge d-none d-md-inline-block",class:t._f("category")(a.product.category)},[t._v(t._s(a.product.category))]),s("span",[t._v(t._s(a.product.title))]),s("span",{staticClass:"text-right d-md-none"},[t._v(t._s(a.qty)+" "+t._s(a.product.unit))])]),a.coupon?s("div",{staticClass:"text-success"},[s("small",[t._v("已套用"+t._s(a.coupon.title))])]):t._e()]),s("td",{staticClass:"align-middle text-nowrap d-none d-md-table-cell"},[t._v(t._s(a.qty)+" "+t._s(a.product.unit))]),a.total!==a.final_total?s("td",{staticClass:"align-middle text-right text-nowrap"},[s("div",{staticClass:"text-dontcare"},[s("em",[s("del",[t._v(t._s(t._f("currency")(a.total)))])])]),s("div",[t._v(t._s(t._f("currency")(a.final_total)))])]):s("td",{staticClass:"align-middle text-right text-nowrap"},[t._v(t._s(t._f("currency")(a.final_total)))])])}),0)]),t._t("tableFooter",[s("tfoot",[t.tableData.final_total==t.tableData.total?s("tr",{staticClass:"text-right"},[s("td"),s("td",{staticClass:"d-none d-md-table-cell"}),s("td",{staticClass:"align-middle"},[t._v("總計")]),s("td",{staticClass:"align-middle"},[t._v(t._s(t._f("currency")(t.tableData.total)))])]):s("tr",{staticClass:"text-right text-dontcare"},[s("td"),s("td",{staticClass:"d-none d-md-table-cell"}),t._m(1),s("td",{staticClass:"align-middle"},[s("em",[s("del",[t._v(t._s(t._f("currency")(t.tableData.total)))])])])]),t.tableData.final_total!==t.tableData.total?s("tr",{staticClass:"text-right text-danger"},[s("td"),s("td",{staticClass:"d-none d-md-table-cell"}),s("td",{staticClass:"align-middle font-weight-bold"},[t._v("折扣價")]),s("td",{staticClass:"align-middle font-weight-bold"},[t._v(t._s(t._f("currency")(t.tableData.final_total)))])]):t._e()])])],2)},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"table-becare"},[s("tr",{staticClass:"text-nowrap"},[s("th",{staticClass:"p-1",attrs:{width:"30"}}),s("th",[t._v("品名")]),s("th",{staticClass:"d-none d-md-table-cell",attrs:{width:"80"}},[t._v("數量")]),s("th",{attrs:{width:"100"}},[t._v("單價")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("td",{staticClass:"align-middle"},[s("em",[t._v("總計")])])}],i={name:"shopCartTable",props:{tableData:{type:Object,default:function(){return{}}},loadingItem:{type:String,default:""}},methods:{doit:function(t,a){this.$emit("doit",t,a)}}},r=i,n=s("2877"),l=Object(n["a"])(r,e,o,!1,null,null,null);l.options.__file="shopCartTable.vue";a["a"]=l.exports},"8d9c":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[e("img",{attrs:{src:s("f8b2"),alt:"",width:"200"}})]),e("div",{staticClass:"row mt-4"},[t._l(t.products,function(a){return[1==a.is_enabled?e("div",{key:a.id,staticClass:"col-lg-4 col-sm-6 mb-4"},[e("div",{staticClass:"card border-0 shadow-sm h-100"},[e("div",{staticClass:"card-Img",style:{backgroundImage:"url("+a.imageUrl+")"}}),e("div",{staticClass:"card-body d-flex flex-column"},[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("h5",{staticClass:"card-title text-truncate mb-0"},[e("a",{staticClass:"text-main font-weight-bold",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.getProduct(a.id)}}},[t._v(t._s(a.title))])]),e("span",{staticClass:"badge",class:t._f("category")(a.category)},[t._v(t._s(a.category))])]),e("p",{staticClass:"card-text multiple-line-truncate"},[t._v(t._s(a.description))]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline flex-wrap mt-auto"},[a.price===a.origin_price?e("div",{staticClass:"h5 text-main ml-auto"},[t._v("售價 "+t._s(t._f("currency")(a.origin_price))+" 元")]):t._e(),a.price&&a.price!=a.origin_price?e("del",{staticClass:"h6 text-dontcare "},[t._v("原價 "+t._s(t._f("currency")(a.origin_price))+" 元")]):t._e(),a.price&&a.price!=a.origin_price?e("div",{staticClass:"h5 text-danger font-weight-bold"},[t._v("破盤價 "+t._s(t._f("currency")(a.price))+" 元")]):t._e()])]),e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn btn-outline-main btn-block",attrs:{type:"button",disabled:""!=t.status.loadingItem},on:{click:function(s){t.getProduct(a.id)}}},[t.status.loadingItem===a.id?e("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):e("i",{staticClass:"fas fa-search mr-1"}),t._v("查看更多\n            ")]),e("button",{staticClass:"btn btn-becare text-main btn-block font-weight-bold",attrs:{type:"button",disabled:""!=t.status.loadingItem},on:{click:function(s){t.addtoCart(a.id)}}},[t.status.loadingItem===a.id?e("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):e("i",{staticClass:"fas fa-cart-plus mr-1"}),t._v("加到購物車\n            ")])])])]):t._e()]})],2),e("pagination",{staticClass:"d-flex justify-content-center",attrs:{"page-data":t.pagination},on:{changepage:t.getProducts}}),e("a",{staticClass:"btn btn-main btn-lg rounded-circle shopcartIcon",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.myshopCart(a)}}},[e("i",{staticClass:"fas fa-shopping-cart"}),t.shopCart.carts&&0!=t.shopCart.carts.length?e("span",{staticClass:"count"},[t._v(t._s(t.shopCart.carts.length))]):t._e()]),e("modal",{attrs:{id:"productInfoModal"}},[e("div",{staticClass:"modal-header bg-main text-white",attrs:{slot:"modalHeader"},slot:"modalHeader"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("i",{staticClass:"fas fa-gamepad mr-1"}),e("span",[t._v(t._s(t.product.title))])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body",attrs:{slot:"modalBody"},slot:"modalBody"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),e("blockquote",{staticClass:"blockquote mt-4"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.description))]),e("footer",{staticClass:"blockquote-footer text-right mt-3"},[t._v(t._s(t.product.content))])]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline flex-wrap"},[t.product.price===t.product.origin_price?e("span",{staticClass:"h5 text-main ml-auto"},[t._v("售價 "+t._s(t._f("currency")(t.product.origin_price))+" 元")]):t._e(),t.product.price&&t.product.price!=t.product.origin_price?e("del",{staticClass:"h6 text-dontcare "},[t._v("原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元")]):t._e(),t.product.price&&t.product.price!=t.product.origin_price?e("span",{staticClass:"h5 text-danger font-weight-bold"},[t._v("破盤價 "+t._s(t._f("currency")(t.product.price))+" 元")]):t._e()]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.buyNum,expression:"product.buyNum"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.product,"buyNum",a.target.multiple?s:s[0])}}},t._l(10,function(a){return e("option",{key:a,domProps:{value:a}},[t._v("\n          選購 "+t._s(a)+" "+t._s(t.product.unit)+"\n        ")])}),0)]),e("div",{staticClass:"modal-footer",attrs:{slot:"modalFooter"},slot:"modalFooter"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("小計\n        "),t.product.price?e("strong",[t._v(t._s(t._f("currency")(t.product.buyNum*t.product.price)))]):e("strong",[t._v(t._s(t._f("currency")(t.product.buyNum*t.product.origin_price)))]),t._v("元\n      ")]),e("button",{staticClass:"btn btn-becare text-main",attrs:{type:"button",disabled:""!=t.status.loadingItem},on:{click:function(a){t.addtoCart(t.product.id,t.product.buyNum)}}},[t.status.loadingItem===t.product.id?e("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):e("i",{staticClass:"fas fa-cart-plus mr-1"}),t._v("加到購物車\n      ")])])]),e("modal",{attrs:{id:"shopCartModal"}},[e("div",{staticClass:"modal-header bg-main text-white",attrs:{slot:"modalHeader"},slot:"modalHeader"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("i",{staticClass:"fas fa-shopping-cart mr-1"}),t.shopCart.carts&&0!=t.shopCart.carts.length?e("span",[t._v("購物車 - 共 "+t._s(t.shopCart.carts.length)+" 件商品")]):e("span",[t._v("購物車 - 目前是空的哦")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body",attrs:{slot:"modalBody"},slot:"modalBody"},[t.shopCart.carts&&0!=t.shopCart.carts.length?e("div",{staticClass:"table-responsive"},[e("shopCartTable",{staticClass:"table-sm",attrs:{"table-data":t.shopCart,"loading-item":t.status.loadingItem},on:{doit:t.delCartItem}}),e("div",{staticClass:"input-group mb-3 px-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",id:"coupontext",placeholder:"請輸入優惠碼","aria-label":"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",disabled:t.status.loadingIcon},on:{click:t.addCouponCode}},[t.status.loadingIcon?e("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):t._e(),t._v("套用優惠券\n              ")])])])],1):e("div",{staticClass:"alert alert-becare py-5 text-center font-weight-bold mb-0"},[t._v("- 噢 , 很遺憾 , 這裡空空如也 - "),e("br"),t._v("繼續逛逛 , 好嗎 ?")])]),e("div",{staticClass:"modal-footer",attrs:{slot:"modalFooter"},slot:"modalFooter"},[e("button",{staticClass:"btn btn-main",attrs:{type:"button"},on:{click:t.closeMyshopCart}},[e("i",{staticClass:"fas fa-walking mr-1"}),t._v("繼續逛逛\n      ")]),t.shopCart.carts&&0!=t.shopCart.carts.length?e("button",{staticClass:"btn btn-becare text-main font-weight-bold",attrs:{type:"button"},on:{click:t.orderModal}},[e("i",{staticClass:"fas fa-hand-holding-usd mr-1"}),t._v("去結帳\n      ")]):t._e()])]),e("modal",{attrs:{id:"OrderModal"}},[e("div",{staticClass:"modal-header bg-main text-white",attrs:{slot:"modalHeader"},slot:"modalHeader"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[e("i",{staticClass:"fas fa-scroll mr-1"}),t._v("建立訂單")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body",attrs:{slot:"modalBody"},slot:"modalBody"},[e("div",{staticClass:"row justify-content-center"},[e("form",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("*Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email",autofocus:""},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("*收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("*收件人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^([0-9]+)$/},expression:"{ required: true, regex: /^([0-9]+)$/ }"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("regex")},attrs:{type:"tel",id:"usertel",name:"regex",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t.errors.has("regex")?e("span",{staticClass:"text-danger"},[t._v("僅接受純數字")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("*收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usermessage"}},[t._v("特殊需求")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"message",id:"usermessage",cols:"30",rows:"10",placeholder:"如果貨品有特殊需求，請在此填入"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})])])])]),e("div",{staticClass:"modal-footer",attrs:{slot:"modalFooter"},slot:"modalFooter"},[e("button",{staticClass:"btn btn-becare text-main font-weight-bold",attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.createdOrder(a)}}},[e("i",{staticClass:"fas fa-envelope mr-1"}),t._v("送出訂單")])])])],1)},o=[],i=s("1157"),r=s.n(i),n=s("4252"),l={name:"shoppingDemo",components:{shopCartTable:n["a"]},data:function(){return{products:[],product:{},shopCart:{},pagination:{},isLoading:!1,status:{loadingItem:"",loadingIcon:!1},coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/products?page=").concat(t),s=this;s.isLoading=!0,this.$http.get(a).then(function(t){s.products=t.data.products,s.pagination=t.data.pagination,s.isLoading=!1})},getProduct:function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/product/").concat(t),s=this;s.status.loadingItem=t,this.$http.get(a).then(function(t){s.product=t.data.product,s.$set(s.product,"buyNum",1),r()("#productInfoModal").modal("show"),s.status.loadingItem=""})},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/cart"),e=this;e.status.loadingItem=t;var o={product_id:t,qty:a};this.$http.post(s,{data:o}).then(function(t){t.data.success&&(e.getCart(),r()("#productInfoModal").modal("hide"),e.$bus.$emit("message:push","【".concat(t.data.data.product.title,"】\n            ").concat(t.data.data.qty," ").concat(t.data.data.product.unit," \n            ").concat(t.data.message),"success"))})},getCart:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/cart"),a=this;this.$http.get(t).then(function(t){a.shopCart=t.data.data,a.status.loadingItem=""})},myshopCart:function(){r()("#shopCartModal").modal("show")},closeMyshopCart:function(){r()("#shopCartModal").modal("hide")},delCartItem:function(t,a){var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/cart/").concat(t),e=this;e.status.loadingItem=t,this.$http.delete(s).then(function(t){e.$bus.$emit("message:push","".concat(t.data.message,"【").concat(a,"】"),"success"),e.getCart()})},addCouponCode:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/coupon"),a=this,s={code:a.coupon_code};a.status.loadingIcon=!0,this.$http.post(t,{data:s}).then(function(t){t.data.success?a.$bus.$emit("message:push","".concat(t.data.message),"success"):a.$bus.$emit("message:push","".concat(t.data.message),"danger"),a.status.loadingIcon=!1,a.coupon_code="",a.getCart()})},orderModal:function(){var t=this;t.isLoading=!0,t.$validator.reset(),r()("#shopCartModal").modal("hide"),setTimeout(function(){t.isLoading=!1,r()("#OrderModal").modal("show")},1e3)},createdOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/order"),s=this,e=s.form;this.$validator.validate().then(function(o){o?(s.isLoading=!0,t.$http.post(a,{data:e}).then(function(t){t.data.success?(s.$bus.$emit("message:push","".concat(t.data.message),"success"),s.$router.push("/admin/orderCheckout/".concat(t.data.orderId))):s.$bus.$emit("message:push","".concat(t.data.message),"danger"),s.isLoading=!1,r()("#OrderModal").modal("hide"),s.getCart()})):s.$bus.$emit("message:push","噢！訂單內有欄位空白唷","danger")})}},created:function(){this.getProducts(),this.getCart()}},c=l,d=s("2877"),u=Object(d["a"])(c,e,o,!1,null,null,null);u.options.__file="shoppingdemo.vue";a["default"]=u.exports},f8b2:function(t,a,s){t.exports=s.p+"img/loading.0f6ddb71.gif"}}]);
//# sourceMappingURL=chunk-1f917b1d.0bef5746.js.map