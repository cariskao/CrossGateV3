(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8d75"],{5730:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"form-row text-center mt-5"},[t._m(0),s("div",{staticClass:"col-12 col-sm"},[s("div",{staticClass:"alert alert-primary alert-rounded shadow-sm",class:{"alert-success":t.order.is_paid},attrs:{role:"alert"}},[t._v("\n          2.確認付款\n          "),t.order.is_paid?s("i",{staticClass:"fas fa-check ml-1"}):s("i",{staticClass:"fas fa-map-marker-alt ml-1"})])]),s("div",{staticClass:"col-12 col-sm"},[s("div",{staticClass:"alert alert-secondary alert-rounded shadow-sm",class:{"alert-success":t.order.is_paid},attrs:{role:"alert"}},[t._v("\n          3.完成\n          "),t.order.is_paid?s("i",{staticClass:"fas fa-check ml-1"}):t._e()])])]),s("div",{staticClass:"my-3 row justify-content-center"},[s("form",{staticClass:"col-md-8",on:{submit:function(a){return a.preventDefault(),t.payOrder(a)}}},[t._m(1),s("div",{staticClass:"table-responsive"},[s("shopCartTable",[s("thead",{staticClass:"table-becare",attrs:{slot:"tableHead"},slot:"tableHead"},[s("tr",{staticClass:"text-nowrap"},[s("th",[t._v("品名")]),s("th",{attrs:{width:"80"}},[t._v("數量")]),s("th",{attrs:{width:"80"}},[t._v("單價")])])]),s("tbody",{staticClass:"bg-white",attrs:{slot:"tableBody"},slot:"tableBody"},t._l(t.order.products,function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("p",{staticClass:"mb-0"},[s("span",{staticClass:"badge d-none d-md-inline-block",class:t._f("category")(a.product.category)},[t._v("\n                      "+t._s(a.product.category)+"\n                  ")]),t._v("\n                  "+t._s(a.product.title)+"\n                  "),s("span",{staticClass:"text-right d-md-none"},[t._v(t._s(a.qty)+" "+t._s(a.product.unit))])]),a.coupon?s("div",{staticClass:"text-success"},[s("small",[t._v("已套用"+t._s(a.coupon.title))])]):t._e()]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),a.total!==a.final_total?s("td",{staticClass:"align-middle text-right text-nowrap"},[s("div",{staticClass:"text-dontcare"},[s("em",[s("del",[t._v(t._s(t._f("currency")(a.total)))])])]),s("div",[t._v("\n                  "+t._s(t._f("currency")(a.final_total))+"\n                ")])]):s("td",{staticClass:"align-middle text-right text-nowrap"},[t._v("\n                "+t._s(t._f("currency")(a.final_total))+"\n              ")])])}),0),s("tfoot",{staticClass:"bg-white",attrs:{slot:"tableFooter"},slot:"tableFooter"},[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t.order.total?s("td",{staticClass:"text-right text-danger font-weight-bold"},[t._v(t._s(t._f("currency")(t.order.total)))]):t._e()])])])],1),t._m(2),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table"},[s("tbody",{staticClass:"bg-white"},[s("tr",[s("th",{staticClass:"table-success align-middle",attrs:{width:"100"}},[t._v("Email")]),s("td",[t._v(t._s(t.order.user.email))])]),s("tr",[s("th",{staticClass:"table-success  align-middle"},[t._v("姓名")]),s("td",[t._v(t._s(t.order.user.name))])]),s("tr",[s("th",{staticClass:"table-success  align-middle"},[t._v("電話")]),s("td",[t._v(t._s(t.order.user.tel))])]),s("tr",[s("th",{staticClass:"table-success  align-middle"},[t._v("地址")]),s("td",[t._v(t._s(t.order.user.address))])]),s("tr",[s("th",{staticClass:"table-success  align-middle"},[t._v("付款狀態")]),s("td",[t.order.is_paid?s("span",{staticClass:"text-success font-weight-bold"},[t._v("付款完成")]):s("span",[t._v("尚未付款")])])])])])]),!1===t.order.is_paid?s("button",{staticClass:"btn btn-becare btn-block btn-lg font-weight-bold text-main",attrs:{disabled:t.status.loadIcon}},[t.status.loadIcon?s("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):s("i",{staticClass:"fas fa-clipboard-check mr-1"}),t._v("確認付款\n      ")]):s("router-link",{staticClass:"btn btn-main btn-block btn-lg font-weight-bold",attrs:{to:"/shopping"}},[s("i",{staticClass:"fas fa-reply mr-1"}),t._v("繼續逛逛？\n      ")])],1)])])},l=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col-12 col-sm"},[s("div",{staticClass:"alert alert-success alert-rounded shadow-sm",attrs:{role:"alert"}},[t._v("\n          1.輸入收件人資訊"),s("i",{staticClass:"fas fa-check ml-1"})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h3",{staticClass:"text-center text-main"},[s("i",{staticClass:"fas fa-shopping-cart mr-2"}),t._v("購買商品清單\n      ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h3",{staticClass:"text-center text-main mt-4"},[s("i",{staticClass:"fas fa-user-circle mr-2"}),t._v("購買人資料")])}],i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",{staticClass:"table table-hover"},[t._t("tableHead",[t._m(0)]),t._t("tableBody",[s("tbody",t._l(t.tableData.carts,function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm border-0",attrs:{type:"button",disabled:""!=t.loadingItem},on:{click:function(s){t.doit(a.id,a.product.title)}}},[t.loadingItem===a.id?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[s("p",{staticClass:"mb-0"},[s("span",{staticClass:"badge d-none d-md-inline-block",class:t._f("category")(a.product.category)},[t._v(t._s(a.product.category))]),s("span",[t._v(t._s(a.product.title))]),s("span",{staticClass:"text-right d-md-none"},[t._v(t._s(a.qty)+" "+t._s(a.product.unit))])]),a.coupon?s("div",{staticClass:"text-success"},[s("small",[t._v("已套用"+t._s(a.coupon.title))])]):t._e()]),s("td",{staticClass:"align-middle text-nowrap d-none d-md-table-cell"},[t._v(t._s(a.qty)+" "+t._s(a.product.unit))]),a.total!==a.final_total?s("td",{staticClass:"align-middle text-right text-nowrap"},[s("div",{staticClass:"text-dontcare"},[s("em",[s("del",[t._v(t._s(t._f("currency")(a.total)))])])]),s("div",[t._v(t._s(t._f("currency")(a.final_total)))])]):s("td",{staticClass:"align-middle text-right text-nowrap"},[t._v(t._s(t._f("currency")(a.final_total)))])])}),0)]),t._t("tableFooter",[s("tfoot",[t.tableData.final_total==t.tableData.total?s("tr",{staticClass:"text-right"},[s("td"),s("td",{staticClass:"d-none d-md-table-cell"}),s("td",{staticClass:"align-middle"},[t._v("總計")]),s("td",{staticClass:"align-middle"},[t._v(t._s(t._f("currency")(t.tableData.total)))])]):s("tr",{staticClass:"text-right text-dontcare"},[s("td"),s("td",{staticClass:"d-none d-md-table-cell"}),t._m(1),s("td",{staticClass:"align-middle"},[s("em",[s("del",[t._v(t._s(t._f("currency")(t.tableData.total)))])])])]),t.tableData.final_total!==t.tableData.total?s("tr",{staticClass:"text-right text-danger"},[s("td"),s("td",{staticClass:"d-none d-md-table-cell"}),s("td",{staticClass:"align-middle font-weight-bold"},[t._v("折扣價")]),s("td",{staticClass:"align-middle font-weight-bold"},[t._v(t._s(t._f("currency")(t.tableData.final_total)))])]):t._e()])])],2)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"table-becare"},[s("tr",{staticClass:"text-nowrap"},[s("th",{staticClass:"p-1",attrs:{width:"30"}}),s("th",[t._v("品名")]),s("th",{staticClass:"d-none d-md-table-cell",attrs:{width:"80"}},[t._v("數量")]),s("th",{attrs:{width:"100"}},[t._v("單價")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("td",{staticClass:"align-middle"},[s("em",[t._v("總計")])])}],c={name:"shopCartTable",props:{tableData:{type:Object,default:function(){return{}}},loadingItem:{type:String,default:""}},methods:{doit:function(t,a){this.$emit("doit",t,a)}}},d=c,n=s("2877"),o=Object(n["a"])(d,i,r,!1,null,null,null);o.options.__file="shopCartTable.vue";var _=o.exports,u={components:{shopCartTable:_},props:{option:{type:Object,default:function(){return{redirePath:"/admin/shopping-demo"}}}},data:function(){return{orderId:"",order:{user:{}},status:{loadIcon:!1}}},methods:{getOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/order/").concat(t.orderId);t.$store.dispatch("updateLoading",!0),this.$http.get(a).then(function(a){a.data.success&&a.data.order?(t.order=a.data.order,t.$store.dispatch("updateLoading",!1)):(t.$store.dispatch("updateLoading",!1),t.$bus.$emit("message:push","糟糕...沒有這筆訂單喔！","danger"),t.$router.push("/admin/shopping-demo"))})},payOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("crossgate","/pay/").concat(t.orderId);t.status.loadIcon=!0,this.$http.post(a).then(function(a){a.data.success&&(a.data.success?(t.$bus.$emit("message:push",a.data.message,"success"),t.getOrder()):t.$bus.$emit("message:push","付款失敗 :( ","danger"),t.status.loadIcon=!0)})}},created:function(){this.orderId=this.$route.params.orderID,this.getOrder()}},p=u,m=Object(n["a"])(p,e,l,!1,null,null,null);m.options.__file="orderCheck.vue";a["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0c8d75.17a02b12.js.map